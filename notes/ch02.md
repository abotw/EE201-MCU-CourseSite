---
title: Ch02
layout: page
parent: Notes
---
# Chapter 2 ‚Äì Light Up Your LED

## üß† Main Topics

1. **Understanding the 51 Microcontroller**
    
2. **Understanding the LED**
    
3. **Special Function Registers (SFRs) & Creating a Keil Project**
    
4. **Writing a Program to Light Up the LED**
    

---

## ‚öôÔ∏è 1. Understanding the 51 Microcontroller

- **Three Main Resources**
    
    - **ROM** ‚Äì stores programs, non-volatile.
        
    - **RAM** ‚Äì stores data, volatile.
        
    - **SFR (Special Function Registers)** ‚Äì control the MCU‚Äôs internal functions.
        
- **Typical Example:** STC89C52RC (8 KB Flash, 512 B RAM).
    
- **Minimum System Requirements:** power supply, crystal oscillator, reset circuit.
    
- **Schematic Tips:** pin numbers in diagrams are logical, not physical; net labels with identical names are electrically connected.
    
- **Package Types:** DIP-40 (for education), QFP (for modern products).
    
- **Key Hardware:**
    
    - **Power Pins:** VCC (+5 V), GND (ground), with filter capacitors.
        
    - **Crystal Oscillator:** provides the clock signal ‚Äî the ‚Äúheart‚Äù of the MCU.
        
    - **Reset Circuit:** returns MCU to initial state (via power-on, button, or software reset).
        

---

## üí° 2. Understanding the LED

- **LED Principle:** a diode that emits light when current flows in the forward direction.
    
- **Typical Specs:** Forward voltage 1.8 ‚Äì 2.2 V, current 1 ‚Äì 20 mA.
    
- **Safety:** Always use a current-limiting resistor to prevent burning out.
    
- **Polarity:** long leg = anode (+), short leg = cathode (‚Äì).
    
- **LED Circuit:** +5 V ‚Üí LED ‚Üí resistor ‚Üí GND (or MCU pin).
    
- **Ohm‚Äôs Law:** use ( I = V/R ) to choose proper resistor (keep 1‚Äì20 mA).
    
- **MCU Control:** connect LED to a port (e.g., P0.0); output low to turn on, high to turn off.
    

---

## üß© 3. SFRs and Creating a Keil Project

- **SFR Basics:**
    
    - `sfr P0 = 0x80;` declares a byte-level register.
        
    - `sbit LED = P0^0;` declares a bit-level alias for precise control.
        
- **Registers as Control Switches:** each bit acts like an on/off switch (0 = ON low, 1 = OFF high).
    
- **RAM vs SFR:** RAM stores data; SFR controls hardware.
    
- **Keil Workflow:**
    
    1. Create a new project (Project ‚Üí New uVision Project).
        
    2. Select chip model (e.g., AT89C52 as STC89C52RC compatible).
        
    3. Add main program file (main.c).
        
    4. Include `reg52.h` for register definitions.
        
    5. Write and compile the code into a .hex file.
        

---

## üñ•Ô∏è 4. Programming and Running

- **Basic Code to Turn On an LED:**
    
    ```c
    #include <reg52.h>
    sbit LED = P0^0;
    
    void main() {
        LED = 0;       // Turn LED ON
        while(1);      // Stay ON
    }
    ```
    
- **Infinite Loop:** `while(1)` prevents the program from ‚Äúrunning away.‚Äù
    
- **Key Concepts:**
    
    - Net labels connect signals with the same name.
        
    - Pull-up resistors ensure defined logic levels.
        
    - Decoders (e.g., 74HC138 3-to-8 decoder) expand control for multiple LEDs.
        
- **Compilation and Burning:**
    
    - Compile to generate `.hex`.
        
    - Use the STC ISP software to download the program.
        
    - ‚ÄúCold start‚Äù: start download first, then power on the board.
        

---

## üßæ Summary of Key Concepts

1. **Hardware Foundation:** Understand ROM, RAM, SFR, power, crystal, and reset.
    
2. **LED Theory:** Master LED properties and safe current control.
    
3. **Software Control:** Use SFR and bit operations to manipulate hardware.
    
4. **Development Practice:** Create a Keil project, compile to .hex, and burn to MCU.
    
5. **Practical Outcome:** Light up an LED through code ‚Äî the first step to embedded system development.

